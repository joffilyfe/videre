!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define("videre",["exports"],t):t(e.Videre=e.Videre||{})}(this,function(e){"use strict";var t=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},n=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),i=function(){function e(n){t(this,e),this.element=n}return n(e,[{key:"toggle",value:function(){this.play()||this.pause()}},{key:"play",value:function(){return this.element.paused&&this.element.play()}},{key:"pause",value:function(){return!this.element.paused&&this.element.pause()}},{key:"isPaused",value:function(){return this.element.paused}},{key:"event",value:function(e,t){for(var n=0,i=e.length;n<i;n++)this.element.addEventListener(e[n],function(){return t()},!1)}},{key:"source",get:function(){return this.element.src},set:function(e){this.element.src=e}},{key:"total",get:function(){return this.element.duration}},{key:"time",get:function(){return this.element.currentTime},set:function(e){this.element.currentTime=e}}]),e}(),r=function(){function e(n){t(this,e),this.element=n}return n(e,[{key:"updateWidth",value:function(e,t){var n=100*e/t;this.element.style.width=n+"%"}}]),e}(),s=function(){function e(n){t(this,e),this.element=n}return n(e,[{key:"update",value:function(e){e?(this.element.classList.add("icon-play"),this.element.classList.remove("icon-pause")):(this.element.classList.add("icon-pause"),this.element.classList.remove("icon-play"))}}]),e}(),o=function(){function e(n){t(this,e),this.containerId=n}return n(e,[{key:"getContainer",value:function(){return this.containerId&&!this.container&&(this.container=document.querySelector(this.containerId)||document.getElementsByTagName("body")[0]),this.container&&this.containerId||(this.container=document.getElementsByTagName("body")[0]),this.container}},{key:"getPlayerWrapper",value:function(){return this.playerwrapper||(this.playerwrapper=document.querySelector(".player-wrapper")),this.playerwrapper}},{key:"getVideo",value:function(){return this.video||(this.video=new i(document.querySelector("video"))),this.video}},{key:"getPlaybackButton",value:function(){return this.playBackButton||(this.playBackButton=new s(document.getElementById("btn-playback"))),this.playBackButton}},{key:"getProgressContainer",value:function(){return this.progressContainer||(this.progressContainer=document.querySelector("#progress-container")),this.progressContainer}},{key:"getProgressBar",value:function(){return this.progressBar||(this.progressBar=new r(document.querySelector("#progress-bar"))),this.progressBar}},{key:"getFullscreenButton",value:function(){return this.fullscreenbutton||(this.fullscreenbutton=document.querySelector("#btn-fullscreen")),this.fullscreenbutton}},{key:"setVideoSource",value:function(e){this.video.src=e}}]),e}(),u=function(e,t){function n(n){if(r.down||"click"===n.type){var s=100*n.offsetX/e.offsetWidth;t.style.width=s+"%",i(s)}}var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},r={down:!1,move:!1,stop:!1};e.addEventListener("mousedown",function(){return r.down=!0},!1),e.addEventListener("mouseup",function(){return r.down=!1},!1),e.addEventListener("click",n),e.addEventListener("mousemove",n)},a=function(){function e(){t(this,e)}return n(e,null,[{key:"listen",value:function(e,t,n){for(var i=0,r=t.length;i<r;i++)e.addEventListener(t[i],function(){return n()},!1)}}]),e}(),l=function(){function e(n){t(this,e),this.elements=n,this.bindVideoEvents(),this.bindPlaybackButtonEvents(),this.bindProgressBarEvents()}return n(e,[{key:"bindVideoEvents",value:function(){var e=this.elements.getVideo(),t=this.elements.getProgressBar(),n=this.elements.getPlaybackButton();a.listen(e.element,["timeupdate"],function(){t.updateWidth(e.time,e.total)}),a.listen(e.element,["playing","pause"],function(){n.update(e.isPaused())})}},{key:"bindPlaybackButtonEvents",value:function(){var e=this.elements.getPlaybackButton(),t=this.elements.getVideo();a.listen(e.element,["click"],function(){t.toggle()})}},{key:"bindProgressBarEvents",value:function(){var e=this.elements.getProgressBar(),t=this.elements.getVideo(),n=this.elements.getProgressContainer();u(n,e.element,function(e){t.time=t.total*e/100})}}]),e}(),c=function(){function e(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t(this,e),this.elements=n,this.options=i,this.render()}return n(e,[{key:"renderTemplate",value:function(){return'\n      <div class="player-wrapper">\n        <div class="player-video">\n          <video></video>\n        </div>\n        <div class="player-overlay">\n            <div id="progress-container">\n              <div id="progress-bar"></div>\n            </div>\n            <div class="player-control">\n              <button id="btn-playback" class="player-button -play icon-play"></button>\n              <button id="btn-fullscreen" class="player-button -full-screen icon-resize-full"></button>\n            </div>\n          </div>\n      </div>'}},{key:"render",value:function(){this.elements.getContainer().innerHTML=this.renderTemplate()}}]),e}(),d=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t(this,e),this.options=n,this.elements=new o(n.containerId),this.view=new c(this.elements),this.control=new l(this.elements),this.setVideo()}return n(e,[{key:"setVideo",value:function(){this.elements.getVideo().source=this.options.src}},{key:"render",value:function(){var e=new c(this.elements);e.render()}}]),e}(),h=function(e){return new d(e)};e.Player=h,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjpudWxsLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb21wb25lbnRzL3ZpZGVvLmpzIiwiLi4vLi4vc3JjL2NvbXBvbmVudHMvcHJvZ3Jlc3NfYmFyLmpzIiwiLi4vLi4vc3JjL2NvbXBvbmVudHMvcGxheWJhY2tfYnV0dG9uLmpzIiwiLi4vLi4vc3JjL2NvcmUvZWxlbWVudHMuanMiLCIuLi8uLi9zcmMvdXRpbC5qcyIsIi4uLy4uL3NyYy9jb3JlL2V2ZW50LmpzIiwiLi4vLi4vc3JjL2NvcmUvY29udHJvbC5qcyIsIi4uLy4uL3NyYy9jb3JlL3ZpZXcuanMiLCIuLi8uLi9zcmMvY29yZS9wbGF5ZXIuanMiLCIuLi8uLi9zcmMvbWFpbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBWaWRlbyB7XG5cbiAgY29uc3RydWN0b3IoZWxlbWVudCkge1xuICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gIH1cblxuICBnZXQgc291cmNlKCkge1xuICAgIHJldHVybiB0aGlzLmVsZW1lbnQuc3JjO1xuICB9XG5cbiAgc2V0IHNvdXJjZSh2YWx1ZSkge1xuICAgIHRoaXMuZWxlbWVudC5zcmMgPSB2YWx1ZTtcbiAgfVxuXG4gIGdldCB0b3RhbCgpIHtcbiAgICByZXR1cm4gdGhpcy5lbGVtZW50LmR1cmF0aW9uO1xuICB9XG5cbiAgZ2V0IHRpbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuZWxlbWVudC5jdXJyZW50VGltZTtcbiAgfVxuXG4gIHNldCB0aW1lKHQpIHtcbiAgICB0aGlzLmVsZW1lbnQuY3VycmVudFRpbWUgPSB0O1xuICB9XG5cbiAgdG9nZ2xlKCkge1xuICAgIHRoaXMucGxheSgpIHx8IHRoaXMucGF1c2UoKTtcbiAgfVxuXG4gIHBsYXkoKSB7XG4gICAgcmV0dXJuIHRoaXMuZWxlbWVudC5wYXVzZWQgJiYgdGhpcy5lbGVtZW50LnBsYXkoKTtcbiAgfVxuXG4gIHBhdXNlKCkge1xuICAgIHJldHVybiAhdGhpcy5lbGVtZW50LnBhdXNlZCAmJiB0aGlzLmVsZW1lbnQucGF1c2UoKTtcbiAgfVxuXG4gIGlzUGF1c2VkKCkge1xuICAgIHJldHVybiB0aGlzLmVsZW1lbnQucGF1c2VkO1xuICB9XG5cbiAgZXZlbnQodHlwZSwgY2FsbGJhY2spIHtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdHlwZS5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIodHlwZVtpXSwgKCkgPT4gY2FsbGJhY2soKSwgZmFsc2UpO1xuICAgIH1cbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJvZ3Jlc3NCYXIge1xuICBjb25zdHJ1Y3RvcihlbGVtZW50KSB7XG4gICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgfVxuXG4gIHVwZGF0ZVdpZHRoKGN1cnJlbnRXaWR0aCwgdG90YWxXaWR0aCkge1xuICAgIGxldCBjdXJyZW50VGltZSA9ICgoY3VycmVudFdpZHRoICogMTAwKSAvIHRvdGFsV2lkdGgpO1xuICAgIHRoaXMuZWxlbWVudC5zdHlsZS53aWR0aCA9IGN1cnJlbnRUaW1lICsgJyUnO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQbGF5YmFja0J1dHRvbiB7XG4gIGNvbnN0cnVjdG9yKGVsZW1lbnQpIHtcbiAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICB9XG5cbiAgdXBkYXRlKHBhdXNlZCkge1xuICAgIGlmIChwYXVzZWQpIHtcbiAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdpY29uLXBsYXknKTtcbiAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdpY29uLXBhdXNlJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdpY29uLXBhdXNlJyk7XG4gICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnaWNvbi1wbGF5Jyk7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgVmlkZW8gZnJvbSAnLi4vY29tcG9uZW50cy92aWRlby5qcyc7XG5pbXBvcnQgUHJvZ3Jlc3NCYXIgZnJvbSAnLi4vY29tcG9uZW50cy9wcm9ncmVzc19iYXIuanMnO1xuaW1wb3J0IFBsYXliYWNrQnV0dG9uIGZyb20gJy4uL2NvbXBvbmVudHMvcGxheWJhY2tfYnV0dG9uLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRWxlbWVudHMge1xuICBjb25zdHJ1Y3Rvcihjb250YWluZXJJZCkge1xuICAgIHRoaXMuY29udGFpbmVySWQgPSBjb250YWluZXJJZDtcbiAgfVxuXG4gIC8qXG4gICogZ2V0IGNvbnRhaW5lciBvZiBwbGF5ZXIsIGlmIGNvbnRhaW5lcklkIG5vdCBmb3VuZFxuICAqIGl0IHdpbGwgYmluZCB0aGUgYm9keSB0YWcuXG4gICovXG4gIGdldENvbnRhaW5lcigpIHtcbiAgICBpZiAoISF0aGlzLmNvbnRhaW5lcklkICYmICF0aGlzLmNvbnRhaW5lcikge1xuICAgICAgdGhpcy5jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuY29udGFpbmVySWQpIHx8XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYm9keScpWzBdO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5jb250YWluZXIgfHwgIXRoaXMuY29udGFpbmVySWQpIHtcbiAgICAgIHRoaXMuY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2JvZHknKVswXTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5jb250YWluZXI7XG4gIH1cblxuICAvKlxuICAqIGdldCBwbGF5ZXIgd3JhcHBlciBjb250YWluZXJcbiAgKi9cbiAgZ2V0UGxheWVyV3JhcHBlcigpIHtcbiAgICBpZiAoIXRoaXMucGxheWVyd3JhcHBlcikge1xuICAgICAgdGhpcy5wbGF5ZXJ3cmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBsYXllci13cmFwcGVyJyk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnBsYXllcndyYXBwZXI7XG4gIH1cblxuICAvKlxuICAqIGdldCB2aWRlbyBlbGVtZW50IHdpdGhvdXQgYXR0cmlidXRlc1xuICAqIHJldHVybiBIVE1MIEVsZW1lbnQgVmlkZW9cbiAgKi9cbiAgZ2V0VmlkZW8oKSB7XG4gICAgaWYgKCF0aGlzLnZpZGVvKSB7XG4gICAgICB0aGlzLnZpZGVvID0gbmV3IFZpZGVvKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3ZpZGVvJykpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy52aWRlbztcbiAgfVxuXG4gIC8qXG4gICogbWV0aG9kIGdldFBsYXlCYWNrQnV0dG9uXG4gICovXG4gIGdldFBsYXliYWNrQnV0dG9uKCkge1xuICAgIGlmICghdGhpcy5wbGF5QmFja0J1dHRvbikge1xuICAgICAgdGhpcy5wbGF5QmFja0J1dHRvbiA9IG5ldyBQbGF5YmFja0J1dHRvbihkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLXBsYXliYWNrJykpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5wbGF5QmFja0J1dHRvbjtcbiAgfVxuXG4gIGdldFByb2dyZXNzQ29udGFpbmVyKCkge1xuICAgIGlmICghdGhpcy5wcm9ncmVzc0NvbnRhaW5lcikge1xuICAgICAgdGhpcy5wcm9ncmVzc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcm9ncmVzcy1jb250YWluZXInKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMucHJvZ3Jlc3NDb250YWluZXI7XG4gIH1cblxuICBnZXRQcm9ncmVzc0JhcigpIHtcbiAgICBpZiAoIXRoaXMucHJvZ3Jlc3NCYXIpIHtcbiAgICAgIHRoaXMucHJvZ3Jlc3NCYXIgPSBuZXcgUHJvZ3Jlc3NCYXIoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Byb2dyZXNzLWJhcicpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5wcm9ncmVzc0JhcjtcbiAgfVxuXG4gIGdldEZ1bGxzY3JlZW5CdXR0b24oKSB7XG4gICAgaWYgKCF0aGlzLmZ1bGxzY3JlZW5idXR0b24pIHtcbiAgICAgIHRoaXMuZnVsbHNjcmVlbmJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNidG4tZnVsbHNjcmVlbicpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5mdWxsc2NyZWVuYnV0dG9uO1xuICB9XG5cbiAgc2V0VmlkZW9Tb3VyY2Uoc291cmNlKSB7XG4gICAgdGhpcy52aWRlby5zcmMgPSBzb3VyY2U7XG4gIH1cbn1cbiIsImxldCBsYXVuY2hGdWxsc2NyZWVuID0gKGVsZW1lbnQpID0+IHtcbiAgaWYoZWxlbWVudC5yZXF1ZXN0RnVsbHNjcmVlbikge1xuICAgIGVsZW1lbnQucmVxdWVzdEZ1bGxzY3JlZW4oKTtcbiAgfSBlbHNlIGlmKGVsZW1lbnQubW96UmVxdWVzdEZ1bGxTY3JlZW4pIHtcbiAgICBlbGVtZW50Lm1velJlcXVlc3RGdWxsU2NyZWVuKCk7XG4gIH0gZWxzZSBpZihlbGVtZW50LndlYmtpdFJlcXVlc3RGdWxsc2NyZWVuKSB7XG4gICAgZWxlbWVudC53ZWJraXRSZXF1ZXN0RnVsbHNjcmVlbigpO1xuICB9IGVsc2UgaWYoZWxlbWVudC5tc1JlcXVlc3RGdWxsc2NyZWVuKSB7XG4gICAgZWxlbWVudC5tc1JlcXVlc3RGdWxsc2NyZWVuKCk7XG4gIH1cbn07XG5cbmxldCBnb1RvV2lkdGggPSAoY29udGFpbmVyLCBiYXIsIGNhbGxiYWNrID0gZnVuY3Rpb24ocG9zKSB7IHJldHVybiBwb3M7IH0pID0+IHtcbiAgbGV0IG1vdXNlID0ge1xuICAgIGRvd246IGZhbHNlLFxuICAgIG1vdmU6IGZhbHNlLFxuICAgIHN0b3A6IGZhbHNlXG4gIH07XG5cbiAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsICgpID0+IG1vdXNlLmRvd24gPSB0cnVlLCBmYWxzZSk7XG4gIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgKCkgPT4gbW91c2UuZG93biA9IGZhbHNlLCBmYWxzZSk7XG4gIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNoYW5nZVN0eWxlKTtcbiAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGNoYW5nZVN0eWxlKTtcblxuICBmdW5jdGlvbiBjaGFuZ2VTdHlsZShldmVudCkge1xuICAgIGlmICghIW1vdXNlLmRvd24gfHwgZXZlbnQudHlwZSA9PT0gJ2NsaWNrJykge1xuICAgICAgbGV0IHBvcyA9ICgoZXZlbnQub2Zmc2V0WCAqIDEwMCkgLyBjb250YWluZXIub2Zmc2V0V2lkdGgpO1xuICAgICAgYmFyLnN0eWxlLndpZHRoID0gcG9zICsgJyUnO1xuICAgICAgY2FsbGJhY2socG9zKTtcbiAgICB9XG4gIH1cbn07XG5cbmV4cG9ydCB7XG4gIGxhdW5jaEZ1bGxzY3JlZW4gYXMgbGF1bmNoRnVsbHNjcmVlbixcbiAgZ29Ub1dpZHRoIGFzIGdvVG9XaWR0aCxcbn07XG5cblxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRXZlbnQge1xuXG4gIHN0YXRpYyBsaXN0ZW4oZWwsIHR5cGVBcnIsIGNhbGxiYWNrKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHR5cGVBcnIubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIodHlwZUFycltpXSwgKCkgPT4gY2FsbGJhY2soKSwgZmFsc2UpO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgZ29Ub1dpZHRoIH0gZnJvbSAnLi4vdXRpbC5qcyc7XG5pbXBvcnQgRXZlbnQgZnJvbSAnLi4vY29yZS9ldmVudC5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbnRyb2wge1xuXG4gIGNvbnN0cnVjdG9yKGVsZW1lbnRzKSB7XG4gICAgdGhpcy5lbGVtZW50cyA9IGVsZW1lbnRzO1xuICAgIHRoaXMuYmluZFZpZGVvRXZlbnRzKCk7XG4gICAgdGhpcy5iaW5kUGxheWJhY2tCdXR0b25FdmVudHMoKTtcbiAgICB0aGlzLmJpbmRQcm9ncmVzc0JhckV2ZW50cygpO1xuICB9XG5cbiAgLypcbiAgKiB7YmluZFZpZGVvRXZlbnRzfVxuICAqIFJlc3BvbnNpYmxlIHRvIGJpbmQgZXZlbnRzIHJlbGF0aXZlcyB0byB2aWRlbyBFbGVtZW50XG4gICogZXZlbnRzOiB7dGltZXVwZGF0ZSwgcGxheWluZywgcGF1c2V9XG4gICovXG4gIGJpbmRWaWRlb0V2ZW50cygpIHtcbiAgICBsZXQgdmlkZW8gPSB0aGlzLmVsZW1lbnRzLmdldFZpZGVvKCk7XG4gICAgbGV0IGJhciA9IHRoaXMuZWxlbWVudHMuZ2V0UHJvZ3Jlc3NCYXIoKTtcbiAgICBsZXQgYnV0dG9uID0gdGhpcy5lbGVtZW50cy5nZXRQbGF5YmFja0J1dHRvbigpO1xuXG4gICAgLy8gVXBkYXRlIHByb2dyZXNzIGJhclxuICAgIEV2ZW50Lmxpc3Rlbih2aWRlby5lbGVtZW50LCBbJ3RpbWV1cGRhdGUnXSwgKCkgPT4ge1xuICAgICAgYmFyLnVwZGF0ZVdpZHRoKHZpZGVvLnRpbWUsIHZpZGVvLnRvdGFsKTtcbiAgICB9KTtcblxuICAgIC8vIFVwZGF0ZSBpY29uIG9mIHBsYXliYWNrIGJ1dHRvblxuICAgIEV2ZW50Lmxpc3Rlbih2aWRlby5lbGVtZW50LCBbJ3BsYXlpbmcnLCAncGF1c2UnXSwgKCkgPT4ge1xuICAgICAgYnV0dG9uLnVwZGF0ZSh2aWRlby5pc1BhdXNlZCgpKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qXG4gICoge2JpbmRQbGF5YmFja0J1dHRvbkV2ZW50c31cbiAgKiBSZXNwb25zaWJsZSB0byBiaW5kIGV2ZW50cyByZWxhdGl2ZXMgdG8gUGxheWJhY2sgQnV0dG9uXG4gICogZXZlbnRzOiB7Y2xpY2t9XG4gICovXG4gIGJpbmRQbGF5YmFja0J1dHRvbkV2ZW50cygpIHtcbiAgICBsZXQgYnV0dG9uID0gdGhpcy5lbGVtZW50cy5nZXRQbGF5YmFja0J1dHRvbigpO1xuICAgIGxldCB2aWRlbyA9IHRoaXMuZWxlbWVudHMuZ2V0VmlkZW8oKTtcblxuICAgIEV2ZW50Lmxpc3RlbihidXR0b24uZWxlbWVudCwgWydjbGljayddLCAoKSA9PiB7XG4gICAgICB2aWRlby50b2dnbGUoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qXG4gICoge2JpbmRQbGF5YmFja0J1dHRvbkV2ZW50c31cbiAgKiBSZXNwb25zaWJsZSB0byBiaW5kIGV2ZW50cyByZWxhdGl2ZXMgdG8gUHJvZ3Jlc3MgQmFyXG4gICogZXZlbnRzOiB7Y2xpY2t9XG4gICovXG4gIGJpbmRQcm9ncmVzc0JhckV2ZW50cygpIHtcbiAgICBsZXQgYmFyID0gdGhpcy5lbGVtZW50cy5nZXRQcm9ncmVzc0JhcigpO1xuICAgIGxldCB2aWRlbyA9IHRoaXMuZWxlbWVudHMuZ2V0VmlkZW8oKTtcbiAgICB2YXIgY29udGFpbmVyID0gdGhpcy5lbGVtZW50cy5nZXRQcm9ncmVzc0NvbnRhaW5lcigpO1xuXG4gICAgZ29Ub1dpZHRoKGNvbnRhaW5lciwgYmFyLmVsZW1lbnQsIChwb3NpdGlvbikgPT4ge1xuICAgICAgdmlkZW8udGltZSA9ICh2aWRlby50b3RhbCAqIHBvc2l0aW9uKSAvIDEwMDtcbiAgICB9KTtcbiAgfVxuXG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBWaWV3IHtcbiAgY29uc3RydWN0b3IoZWxlbWVudHMsIG9wdGlvbnMgPSB7fSkge1xuICAgIHRoaXMuZWxlbWVudHMgPSBlbGVtZW50cztcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIHRoaXMucmVuZGVyKCk7XG4gIH1cblxuICByZW5kZXJUZW1wbGF0ZSgpIHtcbiAgICByZXR1cm4gYFxuICAgICAgPGRpdiBjbGFzcz1cInBsYXllci13cmFwcGVyXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJwbGF5ZXItdmlkZW9cIj5cbiAgICAgICAgICA8dmlkZW8+PC92aWRlbz5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJwbGF5ZXItb3ZlcmxheVwiPlxuICAgICAgICAgICAgPGRpdiBpZD1cInByb2dyZXNzLWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgICA8ZGl2IGlkPVwicHJvZ3Jlc3MtYmFyXCI+PC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwbGF5ZXItY29udHJvbFwiPlxuICAgICAgICAgICAgICA8YnV0dG9uIGlkPVwiYnRuLXBsYXliYWNrXCIgY2xhc3M9XCJwbGF5ZXItYnV0dG9uIC1wbGF5IGljb24tcGxheVwiPjwvYnV0dG9uPlxuICAgICAgICAgICAgICA8YnV0dG9uIGlkPVwiYnRuLWZ1bGxzY3JlZW5cIiBjbGFzcz1cInBsYXllci1idXR0b24gLWZ1bGwtc2NyZWVuIGljb24tcmVzaXplLWZ1bGxcIj48L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+YDtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICB0aGlzLmVsZW1lbnRzLmdldENvbnRhaW5lcigpLmlubmVySFRNTCA9IHRoaXMucmVuZGVyVGVtcGxhdGUoKTtcbiAgfVxufVxuIiwiaW1wb3J0IEVsZW1lbnRzIGZyb20gJy4vZWxlbWVudHMuanMnO1xuaW1wb3J0IENvbnRyb2wgZnJvbSAnLi9jb250cm9sLmpzJztcbmltcG9ydCBWaWV3IGZyb20gJy4vdmlldy5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBsYXllciB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgdGhpcy5lbGVtZW50cyA9IG5ldyBFbGVtZW50cyhvcHRpb25zLmNvbnRhaW5lcklkKTtcbiAgICB0aGlzLnZpZXcgPSBuZXcgVmlldyh0aGlzLmVsZW1lbnRzKTtcbiAgICB0aGlzLmNvbnRyb2wgPSBuZXcgQ29udHJvbCh0aGlzLmVsZW1lbnRzKTtcbiAgICB0aGlzLnNldFZpZGVvKCk7XG4gIH1cblxuICBzZXRWaWRlbygpIHtcbiAgICB0aGlzLmVsZW1lbnRzLmdldFZpZGVvKCkuc291cmNlID10aGlzLm9wdGlvbnMuc3JjO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGxldCB2aWV3ID0gbmV3IFZpZXcodGhpcy5lbGVtZW50cyk7XG4gICAgdmlldy5yZW5kZXIoKTtcbiAgfVxufVxuIiwiaW1wb3J0IFBsYXllciBmcm9tICcuL2NvcmUvcGxheWVyLmpzJztcblxubGV0IHBsYXllciA9IChvcHRpb25zKSA9PiB7XG4gIHJldHVybiBuZXcgUGxheWVyKG9wdGlvbnMpO1xufTtcblxuZXhwb3J0IHtcbiAgcGxheWVyIGFzIFBsYXllclxufTtcbiJdLCJuYW1lcyI6WyJWaWRlbyIsImVsZW1lbnQiLCJwbGF5IiwidGhpcyIsInBhdXNlIiwicGF1c2VkIiwidHlwZSIsImNhbGxiYWNrIiwiaSIsImxlbiIsImxlbmd0aCIsImFkZEV2ZW50TGlzdGVuZXIiLCJzcmMiLCJ2YWx1ZSIsImR1cmF0aW9uIiwiY3VycmVudFRpbWUiLCJ0IiwiUHJvZ3Jlc3NCYXIiLCJjdXJyZW50V2lkdGgiLCJ0b3RhbFdpZHRoIiwic3R5bGUiLCJ3aWR0aCIsIlBsYXliYWNrQnV0dG9uIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwiRWxlbWVudHMiLCJjb250YWluZXJJZCIsImNvbnRhaW5lciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwicGxheWVyd3JhcHBlciIsInZpZGVvIiwicGxheUJhY2tCdXR0b24iLCJnZXRFbGVtZW50QnlJZCIsInByb2dyZXNzQ29udGFpbmVyIiwicHJvZ3Jlc3NCYXIiLCJmdWxsc2NyZWVuYnV0dG9uIiwic291cmNlIiwiZ29Ub1dpZHRoIiwiYmFyIiwiY2hhbmdlU3R5bGUiLCJldmVudCIsIm1vdXNlIiwiZG93biIsInBvcyIsIm9mZnNldFgiLCJvZmZzZXRXaWR0aCIsIkV2ZW50IiwiZWwiLCJ0eXBlQXJyIiwiQ29udHJvbCIsImVsZW1lbnRzIiwiYmluZFZpZGVvRXZlbnRzIiwiYmluZFBsYXliYWNrQnV0dG9uRXZlbnRzIiwiYmluZFByb2dyZXNzQmFyRXZlbnRzIiwiZ2V0VmlkZW8iLCJnZXRQcm9ncmVzc0JhciIsImJ1dHRvbiIsImdldFBsYXliYWNrQnV0dG9uIiwibGlzdGVuIiwidXBkYXRlV2lkdGgiLCJ0aW1lIiwidG90YWwiLCJ1cGRhdGUiLCJpc1BhdXNlZCIsInRvZ2dsZSIsImdldFByb2dyZXNzQ29udGFpbmVyIiwicG9zaXRpb24iLCJWaWV3Iiwib3B0aW9ucyIsInJlbmRlciIsImdldENvbnRhaW5lciIsImlubmVySFRNTCIsInJlbmRlclRlbXBsYXRlIiwiUGxheWVyIiwidmlldyIsImNvbnRyb2wiLCJzZXRWaWRlbyIsInBsYXllciJdLCJtYXBwaW5ncyI6Im9pQkFBcUJBLHdCQUVQQyxrQkFDTEEsUUFBVUEsa0RBd0JWQyxRQUFVQyxLQUFLQyw2Q0FJYkQsTUFBS0YsUUFBUUksUUFBVUYsS0FBS0YsUUFBUUMsOENBSW5DQyxLQUFLRixRQUFRSSxRQUFVRixLQUFLRixRQUFRRyxpREFJckNELE1BQUtGLFFBQVFJLHFDQUdoQkMsRUFBTUMsT0FDTCxHQUFJQyxHQUFJLEVBQUdDLEVBQU1ILEVBQUtJLE9BQVFGLEVBQUlDLEVBQUtELFNBQ3JDUCxRQUFRVSxpQkFBaUJMLEVBQUtFLEdBQUksaUJBQU1ELE9BQVksd0NBckNwREosTUFBS0YsUUFBUVcsa0JBR1hDLFFBQ0paLFFBQVFXLElBQU1DLHNDQUlaVixNQUFLRixRQUFRYSw0Q0FJYlgsTUFBS0YsUUFBUWMsMEJBR2JDLFFBQ0ZmLFFBQVFjLFlBQWNDLFdDdkJWQyx3QkFDUGhCLGtCQUNMQSxRQUFVQSxnREFHTGlCLEVBQWNDLE1BQ3BCSixHQUErQixJQUFmRyxFQUFzQkMsT0FDckNsQixRQUFRbUIsTUFBTUMsTUFBUU4sRUFBYyxhQ1B4Qk8sd0JBQ1ByQixrQkFDTEEsUUFBVUEsMkNBR1ZJLEdBQ0RBLFFBQ0dKLFFBQVFzQixVQUFVQyxJQUFJLGtCQUN0QnZCLFFBQVFzQixVQUFVRSxPQUFPLHFCQUV6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
